––– block: ../base/init –––
––– block: ../base/start-searchd-1 –––
––– block: ../base/start-searchd-2 –––
––– block: ../base/start-searchd-3 –––
––– block: ../base/start-searchd-4 –––
––– block: ../base/start-searchd-5 –––
––– block: ../base/create-cluster-5 –––
––– input –––
mysql -h0 -P19306 -e "create table c:t(id bigint) shards=60 rf=3" >/dev/null
––– output –––
––– input –––
grep '\[error\]' /var/log/manticore-{1,2,3,4,5}/searchd.log
––– output –––
––– input –––
for i in 1 2 3 4 5; do mysql -h0 -P${i}9306 -e "show tables\G"; done | grep 'Index: t' | sort -V
––– output –––
Index: t
Index: t
Index: t
Index: t
Index: t
Index: t_s0
Index: t_s0
Index: t_s0
Index: t_s1
Index: t_s1
Index: t_s1
Index: t_s2
Index: t_s2
Index: t_s2
Index: t_s3
Index: t_s3
Index: t_s3
Index: t_s4
Index: t_s4
Index: t_s4
Index: t_s5
Index: t_s5
Index: t_s5
Index: t_s6
Index: t_s6
Index: t_s6
Index: t_s7
Index: t_s7
Index: t_s7
Index: t_s8
Index: t_s8
Index: t_s8
Index: t_s9
Index: t_s9
Index: t_s9
Index: t_s10
Index: t_s10
Index: t_s10
Index: t_s11
Index: t_s11
Index: t_s11
Index: t_s12
Index: t_s12
Index: t_s12
Index: t_s13
Index: t_s13
Index: t_s13
Index: t_s14
Index: t_s14
Index: t_s14
Index: t_s15
Index: t_s15
Index: t_s15
Index: t_s16
Index: t_s16
Index: t_s16
Index: t_s17
Index: t_s17
Index: t_s17
Index: t_s18
Index: t_s18
Index: t_s18
Index: t_s19
Index: t_s19
Index: t_s19
Index: t_s20
Index: t_s20
Index: t_s20
Index: t_s21
Index: t_s21
Index: t_s21
Index: t_s22
Index: t_s22
Index: t_s22
Index: t_s23
Index: t_s23
Index: t_s23
Index: t_s24
Index: t_s24
Index: t_s24
Index: t_s25
Index: t_s25
Index: t_s25
Index: t_s26
Index: t_s26
Index: t_s26
Index: t_s27
Index: t_s27
Index: t_s27
Index: t_s28
Index: t_s28
Index: t_s28
Index: t_s29
Index: t_s29
Index: t_s29
Index: t_s30
Index: t_s30
Index: t_s30
Index: t_s31
Index: t_s31
Index: t_s31
Index: t_s32
Index: t_s32
Index: t_s32
Index: t_s33
Index: t_s33
Index: t_s33
Index: t_s34
Index: t_s34
Index: t_s34
Index: t_s35
Index: t_s35
Index: t_s35
Index: t_s36
Index: t_s36
Index: t_s36
Index: t_s37
Index: t_s37
Index: t_s37
Index: t_s38
Index: t_s38
Index: t_s38
Index: t_s39
Index: t_s39
Index: t_s39
Index: t_s40
Index: t_s40
Index: t_s40
Index: t_s41
Index: t_s41
Index: t_s41
Index: t_s42
Index: t_s42
Index: t_s42
Index: t_s43
Index: t_s43
Index: t_s43
Index: t_s44
Index: t_s44
Index: t_s44
Index: t_s45
Index: t_s45
Index: t_s45
Index: t_s46
Index: t_s46
Index: t_s46
Index: t_s47
Index: t_s47
Index: t_s47
Index: t_s48
Index: t_s48
Index: t_s48
Index: t_s49
Index: t_s49
Index: t_s49
Index: t_s50
Index: t_s50
Index: t_s50
Index: t_s51
Index: t_s51
Index: t_s51
Index: t_s52
Index: t_s52
Index: t_s52
Index: t_s53
Index: t_s53
Index: t_s53
Index: t_s54
Index: t_s54
Index: t_s54
Index: t_s55
Index: t_s55
Index: t_s55
Index: t_s56
Index: t_s56
Index: t_s56
Index: t_s57
Index: t_s57
Index: t_s57
Index: t_s58
Index: t_s58
Index: t_s58
Index: t_s59
Index: t_s59
Index: t_s59
––– input –––
for i in 1 2 3 4 5; do echo "#{$i}"; mysql -h0 -P${i}9306 -e "show create table t\G" | grep 'Create Table' | grep -o "t_s[0-9]*" | sort -uV; done
––– output –––
#{1}
t_s0
t_s1
t_s2
t_s3
t_s4
t_s5
t_s6
t_s7
t_s8
t_s9
t_s10
t_s11
t_s12
t_s13
t_s14
t_s15
t_s16
t_s17
t_s18
t_s19
t_s20
t_s21
t_s22
t_s23
t_s24
t_s25
t_s26
t_s27
t_s28
t_s29
t_s30
t_s31
t_s32
t_s33
t_s34
t_s35
t_s36
t_s37
t_s38
t_s39
t_s40
t_s41
t_s42
t_s43
t_s44
t_s45
t_s46
t_s47
t_s48
t_s49
t_s50
t_s51
t_s52
t_s53
t_s54
t_s55
t_s56
t_s57
t_s58
t_s59
#{2}
t_s0
t_s1
t_s2
t_s3
t_s4
t_s5
t_s6
t_s7
t_s8
t_s9
t_s10
t_s11
t_s12
t_s13
t_s14
t_s15
t_s16
t_s17
t_s18
t_s19
t_s20
t_s21
t_s22
t_s23
t_s24
t_s25
t_s26
t_s27
t_s28
t_s29
t_s30
t_s31
t_s32
t_s33
t_s34
t_s35
t_s36
t_s37
t_s38
t_s39
t_s40
t_s41
t_s42
t_s43
t_s44
t_s45
t_s46
t_s47
t_s48
t_s49
t_s50
t_s51
t_s52
t_s53
t_s54
t_s55
t_s56
t_s57
t_s58
t_s59
#{3}
t_s0
t_s1
t_s2
t_s3
t_s4
t_s5
t_s6
t_s7
t_s8
t_s9
t_s10
t_s11
t_s12
t_s13
t_s14
t_s15
t_s16
t_s17
t_s18
t_s19
t_s20
t_s21
t_s22
t_s23
t_s24
t_s25
t_s26
t_s27
t_s28
t_s29
t_s30
t_s31
t_s32
t_s33
t_s34
t_s35
t_s36
t_s37
t_s38
t_s39
t_s40
t_s41
t_s42
t_s43
t_s44
t_s45
t_s46
t_s47
t_s48
t_s49
t_s50
t_s51
t_s52
t_s53
t_s54
t_s55
t_s56
t_s57
t_s58
t_s59
#{4}
t_s0
t_s1
t_s2
t_s3
t_s4
t_s5
t_s6
t_s7
t_s8
t_s9
t_s10
t_s11
t_s12
t_s13
t_s14
t_s15
t_s16
t_s17
t_s18
t_s19
t_s20
t_s21
t_s22
t_s23
t_s24
t_s25
t_s26
t_s27
t_s28
t_s29
t_s30
t_s31
t_s32
t_s33
t_s34
t_s35
t_s36
t_s37
t_s38
t_s39
t_s40
t_s41
t_s42
t_s43
t_s44
t_s45
t_s46
t_s47
t_s48
t_s49
t_s50
t_s51
t_s52
t_s53
t_s54
t_s55
t_s56
t_s57
t_s58
t_s59
#{5}
t_s0
t_s1
t_s2
t_s3
t_s4
t_s5
t_s6
t_s7
t_s8
t_s9
t_s10
t_s11
t_s12
t_s13
t_s14
t_s15
t_s16
t_s17
t_s18
t_s19
t_s20
t_s21
t_s22
t_s23
t_s24
t_s25
t_s26
t_s27
t_s28
t_s29
t_s30
t_s31
t_s32
t_s33
t_s34
t_s35
t_s36
t_s37
t_s38
t_s39
t_s40
t_s41
t_s42
t_s43
t_s44
t_s45
t_s46
t_s47
t_s48
t_s49
t_s50
t_s51
t_s52
t_s53
t_s54
t_s55
t_s56
t_s57
t_s58
t_s59
––– input –––
for i in 1 2 3 4 5; do mysql -h0 -P${i}9306 -e "show tables\G" | grep 'Index: t_' | wc -l; done
––– output –––
36
36
36
36
36
